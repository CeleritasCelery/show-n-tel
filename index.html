<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL Discussion Finder</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        color: #333;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 2rem;
    }

    .header {
        text-align: center;
        margin-bottom: 3rem;
        color: white;
    }

    .header h1 {
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
        text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }

    .header p {
        font-size: 1.1rem;
        opacity: 0.9;
    }

    .search-section {
        background: white;
        border-radius: 20px;
        padding: 2rem;
        box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        margin-bottom: 2rem;
    }

    .search-form {
        display: flex;
        gap: 1rem;
        margin-bottom: 1rem;
    }

    .url-input {
        flex: 1;
        padding: 1rem 1.5rem;
        border: 2px solid #e1e5e9;
        border-radius: 12px;
        font-size: 1rem;
        transition: all 0.3s ease;
    }

    .url-input:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .search-btn {
        padding: 1rem 2rem;
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border: none;
        border-radius: 12px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        white-space: nowrap;
    }

    .search-btn:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
    }

    .search-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
    }

    .loading {
        text-align: center;
        padding: 2rem;
        color: #666;
    }

    .spinner {
        display: inline-block;
        width: 30px;
        height: 30px;
        border: 3px solid #f3f3f3;
        border-top: 3px solid #667eea;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-bottom: 1rem;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    .results {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 2rem;
    }

    .platform-section {
        background: white;
        border-radius: 16px;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        transition: transform 0.3s ease;
    }

    .platform-section:hover {
        transform: translateY(-4px);
    }

    .platform-header {
        padding: 1.5rem;
        color: white;
        font-weight: bold;
        font-size: 1.1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .platform-header.hn {
        background: linear-gradient(135deg, #ff6600, #ff8533);
    }

    .platform-header.reddit {
        background: linear-gradient(135deg, #ff4500, #ff6633);
    }

    .platform-header.lobsters {
        background: linear-gradient(135deg, #990000, #cc0000);
    }

    .platform-results {
        max-height: 400px;
        overflow-y: auto;
    }

    .result-item {
        padding: 1rem 1.5rem;
        border-bottom: 1px solid #f0f0f0;
        transition: background-color 0.2s ease;
    }

    .result-item:hover {
        background-color: #f8f9fa;
    }

    .result-item:last-child {
        border-bottom: none;
    }

    .result-title {
        font-weight: 600;
        margin-bottom: 0.5rem;
    }

    .result-title a {
        color: #333;
        text-decoration: none;
    }

    .result-title a:hover {
        color: #667eea;
    }

    .result-meta {
        font-size: 0.85rem;
        color: #666;
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
    }

    .no-results {
        padding: 2rem;
        text-align: center;
        color: #999;
        font-style: italic;
    }

    .error {
        background: #fee;
        color: #c33;
        padding: 1rem;
        border-radius: 8px;
        margin-bottom: 1rem;
    }

    @media (max-width: 768px) {
        .search-form {
            flex-direction: column;
        }

        .results {
            grid-template-columns: 1fr;
        }

        .container {
            padding: 1rem;
        }

        .header h1 {
            font-size: 2rem;
        }
    }
</style>
```

</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîç URL Discussion Finder</h1>
            <p>Find where any URL is being discussed across Hacker News, Reddit, and Lobsters</p>
        </div>

```
    <div class="search-section">
        <form class="search-form" id="searchForm">
            <input
                type="url"
                class="url-input"
                id="urlInput"
                placeholder="Enter a URL (e.g., https://example.com)"
                required
            >
            <button type="submit" class="search-btn" id="searchBtn">
                Search Discussions
            </button>
        </form>
    </div>

    <div id="loading" class="loading" style="display: none;">
        <div class="spinner"></div>
        <p>Searching across platforms...</p>
    </div>

    <div id="results" class="results"></div>
</div>

<script>
    class URLDiscussionFinder {
        constructor() {
            this.form = document.getElementById('searchForm');
            this.urlInput = document.getElementById('urlInput');
            this.searchBtn = document.getElementById('searchBtn');
            this.loading = document.getElementById('loading');
            this.results = document.getElementById('results');

            this.form.addEventListener('submit', this.handleSearch.bind(this));
            
            // Check for URL parameter on page load
            this.checkUrlParameter();
        }

        checkUrlParameter() {
            const urlParams = new URLSearchParams(window.location.search);
            const urlParam = urlParams.get('url');
            
            if (urlParam) {
                this.urlInput.value = urlParam;
                // Auto-search if URL parameter is provided
                this.handleSearch(new Event('submit'));
            }
        }

        async handleSearch(e) {
            e.preventDefault();
            const url = this.urlInput.value.trim();
            if (!url) return;

            // Update URL parameter for bookmarking/sharing
            const newUrl = new URL(window.location);
            newUrl.searchParams.set('url', url);
            window.history.replaceState({}, '', newUrl);

            this.showLoading();

            try {
                const [hnResults, redditResults, lobstersResults] = await Promise.all([
                    this.searchHackerNews(url),
                    this.searchReddit(url),
                    this.searchLobsters(url)
                ]);

                this.displayResults({
                    hackernews: hnResults,
                    reddit: redditResults,
                    lobsters: lobstersResults
                });
            } catch (error) {
                this.showError(error.message);
            }

            this.hideLoading();
        }

        async searchHackerNews(url) {
            try {
                const domain = this.extractDomain(url);
                const response = await fetch(`https://hn.algolia.com/api/v1/search?query=${encodeURIComponent(domain)}&tags=story`);
                const data = await response.json();

                return data.hits.filter(hit =>
                    hit.url && (hit.url.includes(domain) || hit.title.toLowerCase().includes(domain.toLowerCase()))
                ).slice(0, 10).map(hit => ({
                    title: hit.title,
                    url: `https://news.ycombinator.com/item?id=${hit.objectID}`,
                    points: hit.points,
                    comments: hit.num_comments,
                    author: hit.author,
                    created: new Date(hit.created_at).toLocaleDateString()
                }));
            } catch (error) {
                console.error('HN search error:', error);
                return [];
            }
        }

        async searchReddit(url) {
            try {
                const domain = this.extractDomain(url);
                const response = await fetch(`https://www.reddit.com/search.json?q=url:${encodeURIComponent(domain)}&limit=10`);
                const data = await response.json();

                return data.data.children.map(child => ({
                    title: child.data.title,
                    url: `https://reddit.com${child.data.permalink}`,
                    subreddit: child.data.subreddit,
                    score: child.data.score,
                    comments: child.data.num_comments,
                    author: child.data.author,
                    created: new Date(child.data.created_utc * 1000).toLocaleDateString()
                }));
            } catch (error) {
                console.error('Reddit search error:', error);
                return [];
            }
        }

        async searchLobsters(url) {
            try {
                const domain = this.extractDomain(url);
                const response = await fetch(`https://lobste.rs/search.json?q=${encodeURIComponent(domain)}`);
                const data = await response.json();

                return data.slice(0, 10).map(item => ({
                    title: item.title,
                    url: `https://lobste.rs${item.short_id_url}`,
                    score: item.score,
                    comments: item.comment_count,
                    author: item.submitter_user.username,
                    tags: item.tags,
                    created: new Date(item.created_at).toLocaleDateString()
                }));
            } catch (error) {
                console.error('Lobsters search error:', error);
                return [];
            }
        }

        extractDomain(url) {
            try {
                const urlObj = new URL(url);
                return urlObj.hostname.replace(/^www\./, '');
            } catch {
                return url;
            }
        }

        showLoading() {
            this.loading.style.display = 'block';
            this.results.innerHTML = '';
            this.searchBtn.disabled = true;
            this.searchBtn.textContent = 'Searching...';
        }

        hideLoading() {
            this.loading.style.display = 'none';
            this.searchBtn.disabled = false;
            this.searchBtn.textContent = 'Search Discussions';
        }

        showError(message) {
            this.results.innerHTML = `<div class="error">Error: ${message}</div>`;
        }

        displayResults(results) {
            const platforms = [
                { key: 'hackernews', name: 'Hacker News', class: 'hn', icon: 'üì∞' },
                { key: 'reddit', name: 'Reddit', class: 'reddit', icon: 'ü§ñ' },
                { key: 'lobsters', name: 'Lobsters', class: 'lobsters', icon: 'ü¶û' }
            ];

            const html = platforms.map(platform => {
                const platformResults = results[platform.key] || [];

                return `
                    <div class="platform-section">
                        <div class="platform-header ${platform.class}">
                            <span>${platform.icon}</span>
                            ${platform.name} (${platformResults.length})
                        </div>
                        <div class="platform-results">
                            ${platformResults.length > 0
                                ? platformResults.map(result => this.renderResult(result, platform.key)).join('')
                                : '<div class="no-results">No discussions found</div>'
                            }
                        </div>
                    </div>
                `;
            }).join('');

            this.results.innerHTML = html;
        }

        renderResult(result, platform) {
            const meta = [];

            if (platform === 'hackernews') {
                meta.push(`${result.points} points`);
                meta.push(`${result.comments} comments`);
                meta.push(`by ${result.author}`);
            } else if (platform === 'reddit') {
                meta.push(`r/${result.subreddit}`);
                meta.push(`${result.score} upvotes`);
                meta.push(`${result.comments} comments`);
            } else if (platform === 'lobsters') {
                meta.push(`${result.score} points`);
                meta.push(`${result.comments} comments`);
                if (result.tags) meta.push(`tags: ${result.tags.join(', ')}`);
            }

            meta.push(result.created);

            return `
                <div class="result-item">
                    <div class="result-title">
                        <a href="${result.url}" target="_blank">${result.title}</a>
                    </div>
                    <div class="result-meta">
                        ${meta.map(item => `<span>${item}</span>`).join('')}
                    </div>
                </div>
            `;
        }
    }

    // Initialize the app
    new URLDiscussionFinder();
</script>
```

</body>
</html>
